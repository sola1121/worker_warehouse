{% extends "basements/base.html" %}

{% block head_title %}{{ head_title }}{% endblock %}

{% block body %}
{% include "basements/navbar_header.html" %}
{% include "basements/navbar_content_1.html" %}

<div class="card">
    <div class="card-body">

                    
        <div class="container w-25">
            <form>
                {{ form.as_p }}
                <button id="backend-add-confirm" type="button" class="btn btn-primary">确认添加</button>
                <button type="backend-add-anothor" class="btn btn-primary">保存并添加另一个</button>
                <a class="btn btn-info float-right" href="{% url 'warehouse:supplier_home' %}">返回</a>
            </form>
        </div>

    </div>
</div>

{% include "basements/navbar_content_2.html" %}
{% endblock %}

{% block base_script %}
<script>
    window.onload= function(){
        initThisPage.initButton()
    }

    var initThisPage = {
        initButton: function(){buttonAddConfirm(); buttonAddAnother()}
    }

    function buttonAddConfirm(){
        // 添加一个并返回浏览页
        $("#backend-add-confirm").on("click", function(){
            $.post(
                "{% url 'warehouse:supplier_modify' %}",
                {"supplier_id": $("#backend-supplierId").val(), "supplier_name": $("#backend-supplierName").val(), "remark": $("#backend-remark").val()},
                function(reback, status){
                    if (reback["back_msg"] == "OK"){
                        window.alert("成功的通了")
                        // window.location.href = "{% url 'warehouse:supplier_home' %}"
                    } else {
                        window.alert(reback["back_msg"])
                    }
                },
                "json"
            )
        })
    }

    function buttonAddAnother(){
        // 添加一个依然保持在当前
        // window.location.reload()
    }

</script>
{% endblock %}